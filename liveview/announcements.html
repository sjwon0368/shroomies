<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shroomies Announcements</title>
    <style>
        .top-banner {
            display: flex;
            align-items: center;
            background-color: #f8f8f8;
            padding: 10px;
        }
        .top-banner img {
            height: 50px;
            margin-right: 20px;
        }
        .top-banner nav a {
            margin: 0 10px;
            text-decoration: none;
            color: #333;
        }
        .announcement-list {
            list-style-type: none;
            padding: 0;
        }
        .announcement-item {
            padding: 10px;
            border-bottom: 1px solid #ccc;
            cursor: pointer;
        }
        .announcement-item:hover {
            background-color: #f0f0f0;
        }
        .admin-section {
            display: none;
            margin-top: 20px;
        }
        .admin-section input, .admin-section textarea {
            display: block;
            margin: 10px 0;
            padding: 10px;
            width: 100%;
            max-width: 400px;
        }
        .admin-section button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .admin-section button:hover {
            background-color: #45a049;
        }
    </style>
    <script defer src="/__/firebase/11.4.0/firebase-app-compat.js"></script>
    <script defer src="/__/firebase/11.4.0/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/init.js?useEmulator=false"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            const db = firebase.database();
            const announcementsRef = db.ref('announcements');

            announcementsRef.on('value', (snapshot) => {
                const announcements = snapshot.val();
                const list = $('#announcement-list');
                list.empty();
                for (const id in announcements) {
                    const item = $('<li></li>').addClass('announcement-item').text(`${announcements[id].title} - ${new Date(announcements[id].timestamp).toLocaleString()}`);
                    item.data('id', id);
                    item.on('dblclick', () => {
                        alert(`Title: ${announcements[id].title}\nTimestamp: ${new Date(announcements[id].timestamp).toLocaleString()}\nContent: ${announcements[id].content}`);
                    });
                    list.append(item);
                }
            });

            window.adminLogin = function() {
                const adminId = $('#admin-id').val();
                const adminPassword = $('#admin-password').val();
                if (adminId === 'shroomiesadmin12' && adminPassword === 'password') {
                    $('.admin-section').css('display', 'block');
                } else {
                    alert('Invalid ID or password');
                }
            };

            $('#save-announcement').on('click', () => {
                const title = $('#announcement-title').val();
                const content = $('#announcement-content').val();
                const timestamp = Date.now();
                announcementsRef.push({ title, content, timestamp });
            });
        });
    </script>
</head>
<body>
    <div class="top-banner">
        <a href="./home.html">
            <img src="./src/images/15784.svg" alt="Shroomies Logo">
        </a>
        <nav>
            <a href="./home.html">Home</a>
            <a href="./announcements.html">Announcements</a>
            <a href="./main.html">About</a>
        </nav>
    </div>
    <div>
        <h2>Announcements</h2>
        <ul id="announcement-list" class="announcement-list"></ul>
        <div>
            <input type="text" id="admin-id" placeholder="Admin ID">
            <input type="password" id="admin-password" placeholder="Admin Password">
            <button id="admin-login" onclick="adminLogin()">Login</button>
        </div>
        <div class="admin-section">
            <input type="text" id="announcement-title" placeholder="Title">
            <textarea id="announcement-content" placeholder="Content"></textarea>
            <button id="save-announcement">Save Announcement</button>
        </div>
    </div>
</body>
</html>